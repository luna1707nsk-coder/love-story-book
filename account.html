<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</title>

<link href="https://fonts.googleapis.com/css2?family=Spectral+SC:wght@400;600&family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --gold1:#e8d9b6;
  --gold2:#c7a875;
  --gold3:#9c7b55;
  --ink:#4A3A39;
  --bg:#FBF7F2;
}

body{
  font-family:"Playfair Display",serif;
  background:url("assets/background4.jpg") center/cover fixed no-repeat;
  margin:0;
  color:var(--ink);
}

/* HEADER */
.header{
  text-align:center;
  padding:18px 0;
}
.logo-book{
  font-size:42px;
  animation:breath 4s ease-in-out infinite;
  display:inline-block;
  margin-bottom:4px;
}
@keyframes breath{
  0%,100%{transform:translateY(0) scale(1)}
  50%{transform:translateY(-2px) scale(1.01)}
}
.header-title{
  font-family:"Spectral SC";
  font-size:18px;
  background:linear-gradient(90deg,#9b7f64,#d7c29c,#b99673);
  -webkit-background-clip:text;
  color:transparent;
  margin-top:-4px;
}

/* PAGE SECTIONS */
.section{
  display:none;
  padding:16px;
}
.section.active{display:block}

/* PROFILE PANEL */
.profile-card{
  background:rgba(255,255,255,.8);
  backdrop-filter:blur(12px);
  padding:18px;
  border-radius:18px;
  margin-bottom:14px;
}
.profile-card div{margin:4px 0;font-size:16px}

/* QUESTIONS */
.question{
  background:rgba(255,255,255,.85);
  padding:14px;
  border-radius:14px;
  margin-bottom:10px;
}
.question-title{
  font-weight:600;
  cursor:pointer;
  display:flex;
  justify-content:space-between;
}
.question-content{
  display:none;
  margin-top:10px;
}
textarea{
  width:100%;
  border:none;
  border-radius:12px;
  padding:12px;
  font-size:16px;
  background:rgba(255,255,255,.65);
}
.save-btn{
  margin-top:8px;
  padding:10px;
  width:100%;
  border:none;
  border-radius:20px;
  background:linear-gradient(130deg,var(--gold2),var(--gold3));
  color:#fff;
  font-weight:600;
  font-size:15px;
}

/* COVER CAROUSEL */
.cover-block{text-align:center}
.cover-img{
  width:80%;
  max-width:320px;
  height:420px;
  object-fit:cover;
  border-radius:14px;
  box-shadow:0 8px 20px rgba(0,0,0,.22);
  transition:opacity .6s ease;
}

.cover-title{
  margin-top:10px;
  font-weight:600;
  font-size:18px;
}

/* PHOTOS */
.photo-upload-btn{
  display:inline-block;
  padding:12px 22px;
  background:linear-gradient(130deg,var(--gold2),var(--gold3));
  color:#fff;
  border-radius:999px;
  cursor:pointer;
}
#photoInput{display:none}
#photoPreview{
  margin-top:14px;display:flex;flex-wrap:wrap;gap:10px;justify-content:center;
}
.preview-item{width:90px;height:90px;position:relative;border-radius:10px;overflow:hidden}
.preview-item img{width:100%;height:100%;object-fit:cover}
.delete-x{
  position:absolute;top:4px;right:4px;background:rgba(0,0,0,.6);
  color:#fff;border-radius:50%;width:18px;height:18px;font-size:12px;
  display:flex;align-items:center;justify-content:center;cursor:pointer;
}

/* CHAT SUPPORT */
.chat-box{
  background:rgba(255,255,255,.8);
  border-radius:14px;
  height:300px;
  padding:12px;
  overflow-y:auto;
  font-size:15px;
}
.support-input{
  margin-top:8px;
  display:flex;
  gap:8px;
}
.support-input input{
  flex:1;padding:10px;border-radius:10px;border:none;
  background:rgba(255,255,255,.7);
}
.send-btn{
  padding:10px 14px;
  border:none;
  background:linear-gradient(130deg,var(--gold2),var(--gold3));
  border-radius:10px;
  color:#fff;font-weight:600;
}

/* NAV BAR */
.navbar{
  position:fixed;bottom:0;left:0;right:0;
  background:rgba(255,255,255,.85);
  backdrop-filter:blur(10px);
  display:flex;
  border-top:1px solid rgba(0,0,0,.1);
}
.nav-item{
  flex:1;padding:8px 0;
  text-align:center;
  font-size:12px;
  cursor:pointer;
}
.nav-item span{font-size:20px;display:block;margin-bottom:2px}
.nav-item.active{background:rgba(0,0,0,.06);font-weight:700;border-radius:8px}
</style>
</head>

<body>

<div class="header">
  <div class="logo-book">üìñ</div>
  <div class="header-title">A Book Written With Soul</div>
</div>

<!-- SECTIONS -->
<div id="profile" class="section active">
  <div class="profile-card">
    <div><b>–í–∞—à –∫–∞–±–∏–Ω–µ—Ç</b></div>
    <div>–¢–æ–∫–µ–Ω: <span id="tokenDisplay">‚Äì</span></div>
    <div>–û—Ç–≤–µ—Ç–æ–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ: <span id="ansCount">0</span>/100</div>
    <button class="save-btn" onclick="finish()">–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É</button>
  </div>
</div>

<div id="questions" class="section"></div>

<div id="covers" class="section cover-block">
  <img id="coverImg" class="cover-img" src="assets/cover1.jpg" />
  <div class="cover-title">–í—ã–±–æ—Ä –æ–±–ª–æ–∂–∫–∏</div>
</div>

<div id="photos" class="section">
  <label class="photo-upload-btn">–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ
    <input id="photoInput" type="file" multiple accept="image/*">
  </label>
  <div id="photoPreview"></div>
</div>

<div id="support" class="section">
  <div class="chat-box" id="chat"></div>
  <div class="support-input">
    <input id="supportMsg" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
    <button class="send-btn" onclick="sendSupport()">‚Üí</button>
  </div>
</div>

<!-- NAV -->
<div class="navbar">
  <div class="nav-item active" onclick="openTab('profile',this)"><span>üë§</span>–ü—Ä–æ—Ñ–∏–ª—å</div>
  <div class="nav-item" onclick="openTab('questions',this)"><span>üìù</span>–í–æ–ø—Ä–æ—Å—ã</div>
  <div class="nav-item" onclick="openTab('covers',this)"><span>üìö</span>–û–±–ª–æ–∂–∫–∞</div>
  <div class="nav-item" onclick="openTab('photos',this)"><span>üì∑</span>–§–æ—Ç–æ</div>
  <div class="nav-item" onclick="openTab('support',this)"><span>üí¨</span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
</div>

<script>
/* NAV */
function openTab(id, el){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.querySelector('#'+id).classList.add('active');
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  el.classList.add('active');
}

/* QUESTIONS */
const questionsList=[
 "–ì–¥–µ –≤—ã –≤–ø–µ—Ä–≤—ã–µ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å?",
 "–ß—Ç–æ –≤—ã –ø–æ–¥—É–º–∞–ª–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –≤—Å—Ç—Ä–µ—á–µ?",
 "–ö—Ç–æ —Å–¥–µ–ª–∞–ª –ø–µ—Ä–≤—ã–π —à–∞–≥?",
 "–ö–∞–∫–æ–π –º–æ–º–µ–Ω—Ç —Å—Ç–∞–ª —Ä–µ—à–∞—é—â–∏–º?",
 "–ß—Ç–æ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –∑–∞–ø–æ–º–Ω–∏–ª–æ—Å—å?"
];
function renderQuestions(){
  const el=document.getElementById("questions");
  el.innerHTML="";
  let savedCount=0;

  questionsList.forEach((q,i)=>{
    const saved=localStorage.getItem(`a${i}`)??"";
    if(saved.trim()) savedCount++;
    el.innerHTML+=`
      <div class="question">
        <div class="question-title" onclick="toggle(${i})">
          <span>${i+1}. ${q}</span><span id="arr${i}">‚ñ∂Ô∏è</span>
        </div>
        <div class="question-content" id="c${i}">
          <textarea id="t${i}">${saved}</textarea>
          <button class="save-btn" onclick="save(${i})">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
      </div>`;
  });

  document.getElementById("ansCount").textContent=savedCount;
}
function toggle(i){
  const c=document.getElementById("c"+i);
  const a=document.getElementById("arr"+i);
  if(c.style.display==="block"){c.style.display="none";a.textContent="‚ñ∂Ô∏è";}
  else{c.style.display="block";a.textContent="‚ñº";}
}
function save(i){
  localStorage.setItem(`a${i}`,document.getElementById("t"+i).value);
  renderQuestions();
}

/* COVER ROTATION */
const covers=["assets/cover1.jpg","assets/cover2.jpg","assets/cover3.jpg"];
let ci=0;
setInterval(()=>{
  ci=(ci+1)%covers.length;
  document.getElementById("coverImg").style.opacity=0;
  setTimeout(()=>{
    document.getElementById("coverImg").src=covers[ci];
    document.getElementById("coverImg").style.opacity=1;
  },500);
},5000);

/* PHOTOS */
let files=[];
document.getElementById("photoInput").onchange=e=>{
  for(const f of e.target.files) files.push(f);
  renderPhotos();
};
function renderPhotos(){
  const box=document.getElementById("photoPreview");
  box.innerHTML="";
  files.forEach((f,i)=>{
    const url=URL.createObjectURL(f);
    box.innerHTML+=`
      <div class="preview-item">
        <span class="delete-x" onclick="rem(${i})">‚úñ</span>
        <img src="${url}">
      </div>`;
  });
}
function rem(i){ files.splice(i,1); renderPhotos(); }

/* SUPPORT */
function sendSupport(){
  const t=document.getElementById("supportMsg");
  if(!t.value.trim())return;
  const msg=`<div><b>–í—ã:</b> ${t.value}</div>`;
  document.getElementById("chat").innerHTML+=msg;
  t.value="";
}

/* FINISH */
function finish(){
  alert("‚úÖ –ó–∞—è–≤–∫–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–∏–≥–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!");
}

/* INIT */
renderQuestions();
document.getElementById("tokenDisplay").textContent = localStorage.getItem("userToken") || "–Ω–µ—Ç";
</script>

</body>
</html>