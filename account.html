<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚Äî A Book Written With Soul</title>

<link href="https://fonts.googleapis.com/css2?family=Spectral+SC:wght@400;600;700&family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">

<style>
/* ================== THEME: Black & Gold ================== */
:root{
  --bg:#0f0e0d;
  --bg2:#151310;
  --ink:#e9e0d3;
  --muted:#bfb2a0;
  --gold1:#e8d7b2;
  --gold2:#c6a36a;
  --gold3:#8a6a3b;
  --glass: rgba(25,22,19,.6);
  --card: rgba(32,28,24,.65);
  --line: rgba(255,255,255,.08);
  --shadow: 0 20px 60px rgba(0,0,0,.45);
  --radius: 22px;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  background:
    radial-gradient(1000px 600px at 10% -10%, rgba(255,255,255,.06), transparent 60%),
    radial-gradient(900px 500px at 100% 0%, rgba(255,255,255,.05), transparent 55%),
    var(--bg);
  color:var(--ink);
  font-family:"Playfair Display", serif;
  overflow-x:hidden;
}

/* subtle grain */
body::after{
  content:""; position:fixed; inset:0; pointer-events:none; z-index:0;
  background-image:url('https://www.transparenttextures.com/patterns/black-linen.png');
  opacity:.15;
}

/* ================== HEADER ================== */
.header{
  position:sticky; top:0; z-index:100;
  backdrop-filter: blur(14px);
  background: linear-gradient(0deg, transparent, rgba(0,0,0,.28));
  border-bottom:1px solid var(--line);
}
.header-inner{
  max-width:1200px; margin:0 auto; padding:14px 16px;
  display:flex; align-items:center; justify-content:center; gap:12px;
}
.logo{
  display:flex; align-items:center; gap:10px;
  filter: drop-shadow(0 6px 16px rgba(0,0,0,.4));
}
.logo .book{
  font-size:22px; width:28px; height:28px; display:grid; place-items:center;
  animation: float 4s ease-in-out infinite;
}
@keyframes float{
  0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-5px) }
}
.brand{
  font-family:"Spectral SC", serif; font-weight:600; letter-spacing:.04em;
  background:linear-gradient(95deg, var(--gold1), var(--gold2), var(--gold3));
  -webkit-background-clip:text; color:transparent;
  text-shadow:0 0 24px rgba(198,163,106,.18);
}

/* ================== LAYOUT ================== */
.wrap{ max-width:1200px; margin:28px auto; padding:0 16px; position:relative; z-index:1; }
.grid{
  display:grid; grid-template-columns: 280px 1fr; gap:18px;
}
@media (max-width:980px){
  .grid{ grid-template-columns:1fr; }
}

/* ================== ASIDE (LEFT) ================== */
.aside{
  background:var(--card); border:1px solid var(--line); border-radius: var(--radius);
  box-shadow: var(--shadow); padding:18px; position:sticky; top:76px; height:fit-content;
}
.profile{
  display:flex; align-items:center; gap:12px; margin-bottom:14px;
}
.avatar{
  width:46px; height:46px; border-radius:50%; background:linear-gradient(135deg,#2a251f,#1e1a16);
  border:1px solid var(--line); display:grid; place-items:center; font-weight:700; color:var(--gold1);
  text-shadow:0 0 14px rgba(198,163,106,.35);
}
.profile .info small{color:var(--muted)}
.progress{
  margin:12px 0 6px; height:8px; border-radius:999px; background:rgba(255,255,255,.06); overflow:hidden;
  border:1px solid var(--line);
}
.bar{
  height:100%; width:0%;
  background:linear-gradient(90deg, var(--gold3), var(--gold2), var(--gold1));
  transition: width .35s ease;
}
.progress-text{ font-size:13px; color:var(--muted) }

/* Questions list */
.list{
  margin-top:14px; max-height:56vh; overflow:auto; padding-right:6px;
  scrollbar-width:thin;
}
.item{
  display:flex; align-items:center; gap:10px; padding:10px 12px;
  border-radius:12px; cursor:pointer; transition:.2s;
  border:1px solid transparent;
}
.item:hover{ background: rgba(255,255,255,.04); border-color:var(--line) }
.item.active{ background: rgba(255,255,255,.06); border-color:rgba(198,163,106,.35) }
.item .num{ width:30px; height:30px; display:grid; place-items:center; border-radius:8px;
  background:rgba(255,255,255,.06); border:1px solid var(--line); font-weight:700; color:var(--gold1);
  font-size:13px;
}
.item .txt{ flex:1; font-size:14px; color:var(--ink); opacity:.9 }

/* ================== MAIN CARD ================== */
.card{
  background:var(--card); border:1px solid var(--line); border-radius: var(--radius);
  box-shadow: var(--shadow); padding:22px;
}
.card .title{
  display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px;
}
.hint{ color:var(--muted); font-size:14px }
.qtext{
  font-size:22px; line-height:1.35; margin:12px 0 14px; font-weight:600;
}
textarea.answer{
  width:100%; min-height:180px; resize:vertical;
  background:rgba(0,0,0,.22); color:var(--ink);
  border:1px solid var(--line); border-radius:16px; padding:16px 14px;
  font-size:18px; line-height:1.5; outline:none;
  box-shadow: inset 0 2px 12px rgba(0,0,0,.25);
}
.actions{
  display:flex; gap:10px; flex-wrap:wrap; margin-top:12px;
}
.btn{
  border:none; cursor:pointer; color:#0f0e0d; font-weight:800; letter-spacing:.02em;
  background:linear-gradient(135deg, var(--gold1), var(--gold2));
  padding:12px 18px; border-radius:999px; font-size:16px;
  box-shadow:0 14px 28px rgba(198,163,106,.2);
  transition:.2s; user-select:none;
}
.btn:active{ transform: translateY(1px) scale(.995) }
.btn.ghost{
  background:transparent; color:var(--ink); border:1px solid var(--line);
  box-shadow:none;
}
.sep{ height:1px; background:var(--line); margin:18px 0 }

/* Book preview */
.preview{
  display:flex; align-items:center; gap:14px; flex-wrap:wrap;
  background:linear-gradient(180deg, rgba(255,255,255,.04), transparent);
  border:1px solid var(--line); border-radius:16px; padding:14px;
}
.mock{
  width:68px; height:92px; border-radius:8px; background:
    linear-gradient(145deg, #24201b, #1b1814);
  border:1px solid var(--line); position:relative; overflow:hidden;
  box-shadow: 0 12px 28px rgba(0,0,0,.45);
}
.mock::after{
  /* –∑–æ–ª–æ—Ç–∏—Å—Ç—ã–π –æ—Ç–±–ª–µ—Å–∫ */
  content:""; position:absolute; inset:-40% -60% auto auto;
  width:160%; height:160%;
  background: conic-gradient(from 180deg, rgba(255,255,255,.25), rgba(198,163,106,.18), transparent 40%);
  filter: blur(12px); transform: rotate(8deg);
  pointer-events:none;
}
.mock .spine{
  position:absolute; left:6px; top:6px; bottom:6px; width:6px;
  background: linear-gradient(180deg, rgba(198,163,106,.45), rgba(255,255,255,.1));
  border-radius: 3px;
}
.preview .meta small{ color:var(--muted) }

/* ================== MINI CHAT ================== */
.chat{
  position:fixed; right:16px; bottom:16px; z-index:90;
}
.chat .bubble{
  background:var(--glass); border:1px solid var(--line); border-radius:16px;
  padding:12px 14px; font-size:14px; box-shadow: var(--shadow);
  display:none; width:min(86vw,360px);
}
.chat .toggle{
  margin-top:8px;
  width:52px; height:52px; border-radius:50%;
  display:grid; place-items:center; cursor:pointer;
  background: linear-gradient(135deg, var(--gold2), var(--gold1));
  color:#0f0e0d; font-weight:900; border:none;
  box-shadow: 0 16px 36px rgba(198,163,106,.28);
}
.chat.open .bubble{ display:block }

/* ================== TRANSITIONS ================== */
.fade-enter{ opacity:0; transform: translateY(8px) scale(.99) }
.fade-enter-active{ opacity:1; transform:none; transition: .35s ease }
</style>
</head>
<body>

<!-- Header -->
<header class="header">
  <div class="header-inner">
    <div class="logo" aria-label="A Book Written With Soul">
      <div class="book">üìñ</div>
      <div class="brand">A Book Written With Soul</div>
    </div>
  </div>
</header>

<div class="wrap">
  <div class="grid">
    <!-- ASIDE LEFT -->
    <aside class="aside">
      <div class="profile">
        <div class="avatar" id="avatar">AB</div>
        <div class="info">
          <div id="uname" style="font-weight:700;">–í–∞—à –∫–∞–±–∏–Ω–µ—Ç</div>
          <small id="utoken">token: ‚Äî</small>
        </div>
      </div>

      <div class="progress" title="–ü—Ä–æ–≥—Ä–µ—Å—Å –æ—Ç–≤–µ—Ç–æ–≤">
        <div class="bar" id="bar"></div>
      </div>
      <div class="progress-text"><span id="done">0</span>/100 –≤–æ–ø—Ä–æ—Å–æ–≤</div>

      <div class="sep"></div>

      <div class="list" id="qlist">
        <!-- –°–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω JS -->
      </div>
    </aside>

    <!-- MAIN -->
    <main>
      <section class="card fade-enter fade-enter-active" id="card">
        <div class="title">
          <div>
            <div class="hint">–ì–ª–∞–≤–∞ 1 ¬∑ –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ</div>
            <div class="qtext" id="qtext">–ì–¥–µ –≤—ã –≤–ø–µ—Ä–≤—ã–µ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å?</div>
          </div>
          <div class="hint" id="qpos">1 / 100</div>
        </div>

        <textarea class="answer" id="answer" placeholder="–í–∞—à —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –æ—Ç–≤–µ—Ç..."></textarea>

        <div class="actions">
          <button class="btn" id="save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          <button class="btn ghost" id="prev">–ù–∞–∑–∞–¥</button>
          <button class="btn" id="next">–î–∞–ª–µ–µ</button>
          <button class="btn ghost" id="finish">–ó–∞–≤–µ—Ä—à–∏—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </div>

        <div class="sep"></div>

        <div class="preview">
          <div class="mock">
            <div class="spine"></div>
          </div>
          <div class="meta">
            <div style="font-weight:700;">–ü—Ä–µ–≤—å—é –≤–∞—à–µ–π –∫–Ω–∏–≥–∏</div>
            <small>–û–±–ª–æ–∂–∫—É –∏ —Å—Ç–∏–ª—å –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –≤—ã–±—Ä–∞—Ç—å –ø–æ–∑–∂–µ</small>
          </div>
        </div>
      </section>
    </main>
  </div>
</div>

<!-- MINI CHAT -->
<div class="chat" id="chat">
  <div class="bubble">
    <div style="font-weight:700; margin-bottom:6px;">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
    <div style="opacity:.85; font-size:14px;">–ù–∞–ø–∏—à–∏—Ç–µ –≤–æ–ø—Ä–æ—Å ‚Äî —Å–∫–æ—Ä–æ –ø—Ä–∏–∫—Ä—É—Ç–∏–º –æ–Ω–ª–∞–π–Ω-—á–∞—Ç. –ü–æ–∫–∞ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –≤ Telegram-–±–æ—Ç–∞ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã.</div>
  </div>
  <button class="toggle" title="–ü–æ–¥–¥–µ—Ä–∂–∫–∞">üí¨</button>
</div>

<script>
/* ================== DATA ================== */
const QUESTIONS = Array.from({length:100}).map((_,i)=>`–í–æ–ø—Ä–æ—Å ‚Ññ${i+1}. –û–ø–∏—à–∏—Ç–µ –≤–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤–∞—à–µ–π –∏—Å—Ç–æ—Ä–∏–∏.`);
// –º–æ–∂–Ω–æ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å —Ç–≤–æ–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –≥–ª–∞–≤–∞–º ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞

/* ================== TOKEN / USERNAME ================== */
const params = new URL(location.href).searchParams;
const token = params.get("token") || "DEMO-TOKEN";
document.getElementById("utoken").textContent = "token: " + token;

/* –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–∫–∏ –∏–∑ —Ç–æ–∫–µ–Ω–∞ (–∏–Ω–∏—Ü–∏–∞–ª—ã) */
const initials = (()=> {
  const t = token.replace(/[^a-zA-Z0-9]/g,"").toUpperCase();
  return (t[0]||"U") + (t[1]||"S");
})();
document.getElementById("avatar").textContent = initials;

/* ================== STATE ================== */
let current = 0;
let answers = {}; // {index: "text"}

/* ================== UI HOOKS ================== */
const qlist = document.getElementById("qlist");
const qtext = document.getElementById("qtext");
const qpos  = document.getElementById("qpos");
const answer = document.getElementById("answer");
const bar   = document.getElementById("bar");
const done  = document.getElementById("done");

/* Build list */
function buildList(){
  for(let i=0;i<100;i++){
    const row = document.createElement("div");
    row.className = "item";
    row.dataset.index = i;

    const num = document.createElement("div");
    num.className = "num";
    num.textContent = i+1;

    const txt = document.createElement("div");
    txt.className = "txt";
    txt.textContent = QUESTIONS[i];

    row.appendChild(num); row.appendChild(txt);
    row.onclick = ()=> goto(i);
    qlist.appendChild(row);
  }
}
buildList();

/* ================== RENDER ================== */
function render(){
  // left list active
  [...qlist.children].forEach(el=>el.classList.toggle("active", +el.dataset.index === current));
  // question & position
  qtext.textContent = QUESTIONS[current];
  qpos.textContent  = `${current+1} / 100`;
  // textarea
  answer.value = answers[current] || "";

  // progress
  const count = Object.keys(answers).filter(k=>answers[k]?.trim()?.length).length;
  done.textContent = count;
  bar.style.width = (count/100*100) + "%";
}
function goto(i){
  current = (i+100)%100;
  // –Ω–µ–±–æ–ª—å—à–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –≤—Ö–æ–¥–∞
  const card = document.getElementById("card");
  card.classList.remove("fade-enter-active");
  card.classList.add("fade-enter");
  requestAnimationFrame(()=>{
    card.classList.remove("fade-enter");
    card.classList.add("fade-enter-active");
  });
  render();
}

/* ================== ACTIONS ================== */
document.getElementById("save").onclick = ()=>{
  answers[current] = answer.value.trim();
  // TODO: —Ç—É—Ç –±—É–¥–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É
  render();
};

document.getElementById("next").onclick = ()=>{
  answers[current] = answer.value.trim();
  goto(current+1);
};
document.getElementById("prev").onclick = ()=>{
  answers[current] = answer.value.trim();
  goto(current-1);
};

answer.addEventListener("keydown", e=>{
  if(e.key==="Tab"){
    e.preventDefault();
    document.getElementById("next").click();
  }
});

/* Finish (–ø–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞ UI) */
document.getElementById("finish").onclick = ()=>{
  // TODO: –∑–¥–µ—Å—å —Å–æ–±–µ—Ä—ë–º TXT + ZIP —Ñ–æ—Ç–æ –∏ –æ—Ç–ø—Ä–∞–≤–∏–º –≤ Telegram
  alert("–ß–µ—Ä–Ω–æ–≤–∏–∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω. –ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã –∏ –±–æ—Ç–∞ ‚Äî –∑–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤–∞—à–µ–π –∫–Ω–∏–≥–∏ –≤ —Ä–∞–±–æ—Ç—É.");
};

/* mini chat toggle */
const chat = document.getElementById("chat");
chat.querySelector(".toggle").onclick = ()=> chat.classList.toggle("open");

/* init */
goto(0);
</script>
</body>
</html>