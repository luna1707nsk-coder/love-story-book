<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>–ò—Å—Ç–æ—Ä–∏—è ‚Äî –í–æ–ø—Ä–æ—Å—ã</title>

<link href="https://fonts.googleapis.com/css2?family=Spectral+SC:wght@400;600&family=Playfair+Display:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
 --cream:#FBF7F2; --ink:#4A3A39;
 --card:rgba(255,255,255,.78);
 --veil:rgba(255,255,255,.9);
 --gold:#c2a476; --g1:#a88962; --g2:#d8c6a3;
 --shadow:0 14px 38px rgba(0,0,0,.14);
 --r:26px;
}
*{box-sizing:border-box;margin:0;padding:0}

body{
 background:url("assets/background3.jpg") center/cover fixed no-repeat;
 font-family:"Playfair Display",serif;
 color:var(--ink);
 padding:40px 10px;
 overflow-x:hidden;
}

/* ‚Äî‚Äî‚Äî GLASS CARD ‚Äî‚Äî‚Äî */
.card{
 width:100%; max-width:760px; margin:0 auto;
 background:var(--card); backdrop-filter:blur(12px);
 border-radius:var(--r);
 padding:32px;
 box-shadow:var(--shadow);
 animation:fade .6s ease;
}
@keyframes fade{from{opacity:0;transform:translateY(18px)} to{opacity:1;transform:none}}

h1{
 font-family:"Spectral SC",serif;
 text-align:center; margin-bottom:14px;
 background:linear-gradient(90deg,#6a5447,#9b7f64,#d7c29c,#b99673);
 -webkit-background-clip:text;color:transparent;
 font-size:32px;
}
h2{font-size:26px;margin-bottom:14px;text-align:left}
textarea{
 width:100%;height:180px;padding:18px;border:none;border-radius:18px;
 background:var(--veil);font-size:20px;
 box-shadow:inset 0 2px 8px rgba(0,0,0,.06)
}
.btn{
 border:none;cursor:pointer;color:#fff;font-weight:700;
 background:linear-gradient(130deg,#a88962,#c9b08a);
 padding:14px 28px;border-radius:999px;font-size:18px;
 box-shadow:0 12px 32px rgba(0,0,0,.18);transition:.25s;
}
.btn:hover{transform:translateY(-2px);opacity:.96}
.btn-full{width:100%}

/* ‚Äî‚Äî‚Äî PHOTO ‚Äî‚Äî‚Äî */
#photo-step{display:none;text-align:center}
.photo-upload-btn{
 display:inline-block;cursor:pointer;padding:14px 32px;margin:14px 0 8px;
 background:linear-gradient(130deg,#a88962,#c9b08a);color:#fff;
 border-radius:999px;font-weight:700;font-size:18px;
 box-shadow:0 12px 32px rgba(0,0,0,.18)
}
#photos{display:none}
#preview{margin-top:14px;display:flex;flex-wrap:wrap;gap:12px;justify-content:center}
.preview-item{
 position:relative;width:96px;height:96px;border-radius:12px;overflow:hidden;
 box-shadow:0 6px 16px rgba(0,0,0,.16);animation:pop .4s ease;
}
@keyframes pop{from{opacity:0;transform:scale(.85)}to{opacity:1;transform:none}}
.preview-item img{width:100%;height:100%;object-fit:cover}
.delete-x{
 position:absolute;top:6px;right:6px;width:22px;height:22px;border-radius:50%;
 background:rgba(0,0,0,.65);color:#fff;font-size:14px;
 display:flex;align-items:center;justify-content:center;cursor:pointer;
}
.photo-actions{display:flex;gap:12px;justify-content:center;margin-top:14px}

/* ‚Äî‚Äî‚Äî PREMIUM CARD ‚Äî‚Äî‚Äî */
.bank-card{
 width:100%;max-width:430px;margin:18px auto;
 padding:28px;border-radius:28px;
 background:linear-gradient(135deg,#b69363,#e6d6b9,#b69262);
 background-size:200% 200%;animation:glow 6s ease infinite;
 color:#fff;font-weight:700;text-align:center;font-size:26px;
 box-shadow:0 16px 40px rgba(0,0,0,.25);
 position:relative;overflow:hidden;
}
@keyframes glow{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.bank-card span{
 font-family:"Spectral SC",serif;
 letter-spacing:4px;display:block;
 -webkit-touch-callout:none;
 -webkit-user-select:none;
 user-select:none;
 pointer-events:none;
}
.tap-copy{
 font-size:13px;margin-top:6px;opacity:.75;
 font-family:"Playfair Display";pointer-events:none;
}

/* ‚Äî‚Äî‚Äî PAYMENT MODAL ‚Äî‚Äî‚Äî */
.modal-bg{
 position:fixed;inset:0;display:none;
 justify-content:center;align-items:center;
 background:rgba(0,0,0,.45);backdrop-filter:blur(8px);z-index:99;
}
.modal{
 background:rgba(255,255,255,.9);
 border-radius:22px;padding:24px;width:92%;max-width:500px;
 animation:fade .35s ease;text-align:center;
}
.tariff-title{
 font-family:"Spectral SC";font-size:28px;
 background:linear-gradient(90deg,#9b7f64,#d7c29c,#b99673);
 -webkit-background-clip:text;color:transparent;margin-bottom:8px;
}
.price{font-weight:700;font-size:22px;color:#8e6c50;margin:8px 0 10px}
.copy-btn{
 width:100%;padding:12px;border:1px dashed #c9b08a;
 background:#fff;border-radius:12px;cursor:pointer;margin-bottom:14px;
 font-size:17px;font-weight:600;color:#6a5447;
}
.pay-action{margin-top:4px}

@media(max-width:600px){
 .photo-actions{flex-direction:column}
 .btn-full,.photo-actions .btn{width:100%}
 .bank-card{font-size:22px;padding:22px}
}
</style>
</head>

<body>

<div class="card" id="step-questions">
 <h1>–ü—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å</h1>
 <h2 id="q">–ì–¥–µ –≤—ã –≤–ø–µ—Ä–≤—ã–µ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å?</h2>
 <textarea id="a" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç..."></textarea>
 <button class="btn btn-full" id="next">–î–∞–ª–µ–µ</button>
</div>

<div class="card" id="photo-step">
 <h1>–î–æ–±–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ</h1>
 <p>–ß—Ç–æ–±—ã –∫–Ω–∏–≥–∞ —Å—Ç–∞–ª–∞ –µ—â—ë —Ç–µ–ø–ª–µ–µ ü§ç<br>(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</p>

 <label class="photo-upload-btn">üìé –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–æ—Ç–æ
  <input type="file" id="photos" multiple accept="image/*">
 </label>

 <div id="preview"></div>

 <div class="photo-actions">
  <button class="btn" onclick="sendPhotos()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ</button>
  <button class="btn" onclick="openPay()">–°–æ–∑–¥–∞—Ç—å –º–æ—é –∫–Ω–∏–≥—É ‚ù§Ô∏è</button>
 </div>

 <div style="font-size:14px;opacity:.7;margin-top:6px">–ù–∞–∂–º–∏ ‚úñ, —á—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ</div>
</div>

<div id="payModal" class="modal-bg">
 <div class="modal">

  <div class="tariff-title">‚ú® Basic</div>
  <div class="price">2490 ‚ÇΩ</div>
  <div class="bank-card tilt"><span>2200 7017 4877 2404</span><span>2404</span></div>
  <div class="tap-copy">–¢-–ë–∞–Ω–∫ ‚Äî –Ω–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</div>
  <button class="copy-btn" onclick="copyCard()">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–≤–∏–∑–∏—Ç—ã</button>
  <button class="btn btn-full pay-action" onclick="openBot('basic')">–û–ø–ª–∞—Ç–∏–ª ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ–∫</button>

  <hr style="opacity:.2;margin:22px 0">

  <div class="tariff-title">üíé Premium</div>
  <div class="price">6990 ‚ÇΩ</div>
  <div class="bank-card tilt"><span>2200 7017 4877 2404</span><span>2404</span></div>
  <div class="tap-copy">–¢-–ë–∞–Ω–∫ ‚Äî –Ω–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</div>
  <button class="copy-btn" onclick="copyCard()">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–≤–∏–∑–∏—Ç—ã</button>
  <button class="btn btn-full pay-action" onclick="openBot('premium')">–û–ø–ª–∞—Ç–∏–ª ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ–∫</button>

  <p style="margin-top:10px;font-size:13px;opacity:.7">–ù–∞–∂–º–∏—Ç–µ –≤–Ω–µ –æ–∫–Ω–∞, —á—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å</p>

 </div>
</div>

<script>
// ‚Äî‚Äî‚Äî QUESTIONS ‚Äî‚Äî‚Äî
const qs=[
"–ì–¥–µ –≤—ã –≤–ø–µ—Ä–≤—ã–µ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å?",
"–ß—Ç–æ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –≤—Å—Ç—Ä–µ—á–µ?",
"–ö—Ç–æ —Å–¥–µ–ª–∞–ª –ø–µ—Ä–≤—ã–π —à–∞–≥?",
"–ö–∞–∫–æ–π –º–æ–º–µ–Ω—Ç —Å—Ç–∞–ª —Ä–µ—à–∞—é—â–∏–º?",
"–ß—Ç–æ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –∑–∞–ø–æ–º–Ω–∏–ª–æ—Å—å?"
];
let i=0;
const q=document.getElementById('q'), a=document.getElementById('a');

async function sendAnswerToBot(question,answer){
 if(!answer.trim())return;
 await fetch("/api/sendMessage",{
  method:"POST",headers:{"Content-Type":"application/json"},
  body:JSON.stringify({text:`üìñ <b>–û—Ç–≤–µ—Ç</b>\n‚ùì ${question}\n‚úèÔ∏è ${answer}`})
 });
}
function nextQ(){
 const val=a.value.trim();
 if(val)sendAnswerToBot(qs[i],val);
 i++;
 if(i<qs.length){q.textContent=qs[i];a.value="";
 }else{
  document.getElementById("payModal").style.display='flex';
 }
}
document.getElementById('next').onclick=nextQ;
a.addEventListener('keydown',e=>{if(e.key==="Enter"){e.preventDefault();nextQ();}});

// ‚Äî‚Äî‚Äî PHOTOS ‚Äî‚Äî‚Äî
let files=[];
document.getElementById('photos').onchange=e=>{
 for(const f of e.target.files)files.push(f);
 renderPhotos();
};
function renderPhotos(){
 const box=document.getElementById('preview');box.innerHTML="";
 files.forEach((f,idx)=>{
  const url=URL.createObjectURL(f);
  const w=document.createElement('div');w.className='preview-item';
  w.innerHTML=`<span class="delete-x" onclick="removePhoto(${idx})">‚úñ</span><img src="${url}">`;
  box.appendChild(w);
 });
}
function removePhoto(i){files.splice(i,1);renderPhotos();}
async function sendPhotos(){
 if(!files.length)return alert("–§–æ—Ç–æ –Ω–µ –≤—ã–±—Ä–∞–Ω—ã");
 for(const f of files){
  const fd=new FormData();fd.append("photo",f);
  await fetch("/api/sendPhoto",{method:"POST",body:fd});
  await new Promise(r=>setTimeout(r,300));
 }
 alert("–§–æ—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã ü§ç");
}

// ‚Äî‚Äî‚Äî PAY ‚Äî‚Äî‚Äî
function openPay(){document.getElementById("payModal").style.display='flex';}
document.getElementById("payModal").onclick=e=>{
 if(e.target.id==="payModal")e.target.style.display='none';
};
function copyCard(){
 navigator.clipboard.writeText("2200701748772404");
 alert("–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ ‚úÖ");
}
function openBot(tier){
 const bot="abookaboutyou_bot";
 const start=tier==="premium"?"pay_premium":"pay_basic";
 window.open(`https://t.me/${bot}?start=${start}`,"_blank");
 fetch("/api/sendMessage",{method:"POST",headers:{"Content-Type":"application/json"},
  body:JSON.stringify({text:`üí∏ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª —Ç–∞—Ä–∏—Ñ: ${tier}`})});
}

// ‚Äî‚Äî‚Äî 3D TILT ‚Äî‚Äî‚Äî
document.querySelectorAll(".tilt").forEach(card=>{
 window.addEventListener("deviceorientation",e=>{
  const x=e.gamma/45*8,y=e.beta/45*8;
  card.style.transform=`rotateY(${x}deg) rotateX(${-y}deg)`;
 });
 card.onpointermove=e=>{
  const r=card.getBoundingClientRect(),x=(e.clientX-r.left)/r.width-.5,y=(e.clientY-r.top)/r.height-.5;
  card.style.transform=`rotateY(${x*12}deg) rotateX(${-y*12}deg)`;
 };
 card.onpointerleave=()=>card.style.transform="";
});
</script>

</body>
</html>