<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>–ò—Å—Ç–æ—Ä–∏—è ‚Äî –≤–æ–ø—Ä–æ—Å—ã</title>

<link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:wght@500;600&family=Cormorant+Garamond:wght@400;500&family=Great+Vibes&display=swap" rel="stylesheet"/>

<style>
:root{
  --ink:#3e2b33;
  --plum:#4b2c3d;
  --rose:#c49aa6;
  --rose2:#b47c8b;
  --gold1:#f7e8c9; --gold2:#e7d19b; --gold3:#d0b46a;
  --glass:rgba(255,255,255,.88);
}

/* Base */
*{box-sizing:border-box}
body{
  margin:0;
  font-family:"Cormorant Garamond",serif;
  background:url("assets/roses.jpg") center/cover fixed no-repeat;
  color:var(--ink);
  overflow-x:hidden;
}

/* butterflies texture */
body::before{
  content:"";
  position:fixed; inset:0;
  background:url("assets/butterflies.jpg") center/cover no-repeat;
  pointer-events:none;
  mix-blend-mode:screen; opacity:.16;
  animation:zoom 22s ease-in-out infinite alternate;
}
@keyframes zoom{from{transform:scale(1)} to{transform:scale(1.05)}}

/* layout */
.wrap{max-width:760px;margin:0 auto;padding:82px 18px 120px}

/* Progress */
.progress-head{
  font-family:"Bodoni Moda",serif;
  font-size:24px;font-weight:600;
  text-align:center;
  padding:8px 18px;
  border-radius:10px;
  background:rgba(255,255,255,.9);
  backdrop-filter:blur(6px);
  color:var(--plum);
  margin-bottom:8px;
}
.progress-bar{height:10px;background:rgba(255,255,255,.55);border-radius:999px;overflow:hidden;margin-bottom:26px}
.progress-fill{height:100%;width:0;background:linear-gradient(90deg,var(--rose),var(--rose2),var(--gold2));transition:width .45s}

/* Card */
.card{
  background:var(--glass);
  backdrop-filter:blur(20px);
  border-radius:22px;
  padding:42px 30px 46px;
  border:1px solid rgba(255,255,255,.6);
  box-shadow:0 18px 50px rgba(0,0,0,.16);
  animation:fadeIn .5s both;
}
@keyframes fadeIn{from{opacity:0;transform:translateY(18px)}}

/* Titles */
.q-title{
  font-family:"Bodoni Moda",serif;
  font-size:clamp(22px,3.5vw,32px);
  text-align:center;
  line-height:1.25;
  margin:0 0 16px;
  color:var(--plum);
}

/* handwritten layer */
.write-surface{position:relative}
textarea.answer{
  width:100%;min-height:180px;border-radius:18px;
  padding:18px 22px;
  border:1px solid rgba(0,0,0,.06);
  background:#fff;
  font:19px/1.6 "Cormorant Garamond",serif;
}
textarea.answer::placeholder{color:#bfaeb6}
.ink{
  position:absolute;inset:0;padding:18px 22px;pointer-events:none;
  font:28px/1.5 "Great Vibes",cursive;color:#613649;
  white-space:pre-wrap;
}
.caret{display:inline-block;width:9px;height:28px;background:#b27a8d;animation:blink 1s infinite}
@keyframes blink{50%{opacity:0}}

/* Buttons */
.actions{display:flex;gap:12px;margin-top:18px;flex-wrap:wrap;justify-content:center}
.btn{
  border:none;border-radius:999px;padding:14px 22px;
  background:linear-gradient(140deg,#d9a8b9,#b27a8d);
  color:#fff;font-weight:700;cursor:pointer;
  box-shadow:0 12px 26px rgba(0,0,0,.16);
}
.btn-ghost{
  border:1px solid var(--rose2);background:transparent;color:var(--rose2);
}

/* Paywall card CLEAR TEXT FIX */
.pay-top-title{
  font-family:"Bodoni Moda",serif;
  font-size:28px;font-weight:600;
  color:#4a2e3f;
  text-align:center;
  margin-bottom:14px;
}
.pay-desc{
  font-size:19px;line-height:1.55;text-align:center;color:#4b2e3d;
  margin:0 auto 24px;max-width:520px;
}
.pay-box{
  background:#fff;border-radius:18px;
  padding:20px 22px;margin-bottom:26px;
  border:1px solid rgba(0,0,0,.05);
}
.pay-btn{
  display:block;margin:0 auto;
  padding:15px 34px;border-radius:999px;
  background:linear-gradient(140deg,#c49aa6,#b47c8b,#d8c7b0);
  color:#fff;font-weight:700;font-size:18px;text-align:center;text-decoration:none;
}

/* petals */
.petal{position:fixed;top:-20px;width:9px;height:9px;border-radius:50%;
 background:radial-gradient(circle at 30% 30%,#ffdcea,#f8a7c6 60%,transparent 78%);
animation:fall linear forwards;pointer-events:none;z-index:2}
@keyframes fall{to{transform:translate(var(--dx),105vh);opacity:.15}}

/* mobile */
@media(max-width:520px){
  .pay-top-title{font-size:24px}
}
</style>
</head>
<body>

<div class="wrap">

<div id="ph" class="progress-head">–í–æ–ø—Ä–æ—Å 1 –∏–∑ 5</div>
<div class="progress-bar"><div id="pf" class="progress-fill"></div></div>

<div id="card" class="card">

  <h2 id="qt" class="q-title"></h2>

  <div class="write-surface">
    <textarea id="ta" class="answer" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç..."></textarea>
    <div id="ink" class="ink"><span class="caret"></span></div>
  </div>

  <div class="actions">
    <button id="saveBtn" class="btn-ghost">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –ø–æ–∑–∂–µ</button>
    <button id="nextBtn" class="btn">–î–∞–ª–µ–µ</button>
  </div>

</div>

</div>

<script>
const QUESTIONS=[
 "–ì–¥–µ –≤—ã –≤–ø–µ—Ä–≤—ã–µ –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å?",
 "–ß—Ç–æ –≤—ã –ø–æ–¥—É–º–∞–ª–∏, –∫–æ–≥–¥–∞ —É–≤–∏–¥–µ–ª–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞?",
 "–ö—Ç–æ —Å–¥–µ–ª–∞–ª –ø–µ—Ä–≤—ã–π —à–∞–≥?",
 "–ß—Ç–æ –∑–∞–ø–æ–º–Ω–∏–ª–æ—Å—å –≤ —Ç–æ—Ç –¥–µ–Ω—å?",
 "–ö–∞–∫–∏–º –±—ã–ª–æ –≤–∞—à–µ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ?"
];

let step=parseInt(localStorage.getItem("step")||0);

const ph=document.getElementById('ph');
const pf=document.getElementById('pf');
const qt=document.getElementById('qt');
const ta=document.getElementById('ta');
const ink=document.getElementById('ink');
const card=document.getElementById('card');

function updateUI(){
 ph.textContent=`–í–æ–ø—Ä–æ—Å ${Math.min(step+1,5)} –∏–∑ 5`;
 pf.style.width=(Math.min(step,5)/5*100)+"%";
 qt.textContent=QUESTIONS[step]||"–í–æ–ø—Ä–æ—Å";
 ta.value=localStorage.getItem("ans_"+step)||"";
 renderInk();
}
updateUI();

function renderInk(){
 let t=ta.value.replace(/</g,"&lt;"); 
 ink.innerHTML=t+'<span class="caret"></span>';
}
ta.oninput=()=>{
 localStorage.setItem("ans_"+step,ta.value);
 renderInk();
};

function sendToTG(payload){
 try{
   const b=new Blob([JSON.stringify(payload)],{type:'application/json'});
   navigator.sendBeacon?.('/api/telegram',b);
 }catch(e){}
}

document.getElementById('saveBtn').onclick=()=>alert("–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ üíó");

document.getElementById('nextBtn').onclick=()=>{
 localStorage.setItem("ans_"+step,ta.value.trim());
 sendToTG({type:"answer",step:step+1,q:QUESTIONS[step],a:ta.value,time:new Date().toISOString()});

 step++; localStorage.setItem("step",step);
 if(step>=5){ showPaywall(); return; }
 updateUI();
};

function showPaywall(){
 ph.textContent="–ü—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞";
 pf.style.width="100%";

 const answers=[];
 for(let i=0;i<5;i++){
   answers.push({q:QUESTIONS[i],a:localStorage.getItem("ans_"+i)||""});
 }
 sendToTG({type:"trial",answers});

 card.innerHTML=`
   <div class="pay-top-title">–ü—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞</div>
   <div class="pay-desc">
     –°–ø–∞—Å–∏–±–æ üå∏ –í—ã –ø—Ä–æ—à–ª–∏ –ø–µ—Ä–≤—ã–µ 5 –≤–æ–ø—Ä–æ—Å–æ–≤.
     –û—Ç–∫—Ä–æ–π—Ç–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è 95 –∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–µ—Ç–ª–µ–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –≤–∞—à–µ–π –ª—é–±–≤–∏.
   </div>
   <div class="pay-box">
     ‚úì –î–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º 100 –≤–æ–ø—Ä–æ—Å–∞–º<br>
     ‚úì –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ<br>
     ‚úì –ê–≤—Ç–æ—Ä—Å–∫–∞—è —Ä–µ–¥–∞–∫—Ç—É—Ä–∞ —Ç–µ–∫—Å—Ç–∞<br>
     ‚úì –ü—Ä–µ–º–∏–∞–ª—å–Ω–∞—è –≤—ë—Ä—Å—Ç–∫–∞ –∫–Ω–∏–≥–∏
   </div>
   <a href="https://t.me/abookaboutyou" class="pay-btn">–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å ‚ú®</a>
 `;
}

/* petals */
function petal(){
 let p=document.createElement("div");
 p.className="petal";
 p.style.left=Math.random()*100+"vw";
 p.style.setProperty("--dx",(Math.random()*50-25)+"vw");
 p.style.animationDuration=(8+Math.random()*8)+"s";
 document.body.appendChild(p);
 setTimeout(()=>p.remove(),16000);
}
setInterval(()=>petal(),1200);
</script>

</body>
</html>